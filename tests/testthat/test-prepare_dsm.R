# Generated by fusen: do not edit by hand

library(testthat)
library(dplyr)

test_that("test conformite prepare_dsm", {
  
  data(dataset_segs)
  data(dataset_map)
  data(dataset_detected)
  
  
  test <- prepare_dsm(map_obj = dataset_map,
                      dist_obj = dataset_detected, 
                      segs_obj = dataset_segs)
  
  exp <- list(dist_dsm = structure(list(object = c(2L, 3L, 9L, 12L, 22L, 
23L, 26L, 29L, 32L, 49L, 69L, 72L, 79L, 86L, 103L, 108L, 121L, 
126L, 127L, 140L, 150L, 162L, 165L, 169L, 190L, 194L, 200L, 202L, 
215L, 217L, 222L, 226L, 229L, 238L, 243L, 259L, 262L, 274L, 275L, 
277L, 304L, 308L, 310L, 311L, 317L, 318L, 329L, 332L, 334L, 344L, 
361L, 366L, 371L, 375L, 380L, 381L, 387L, 393L, 395L, 408L, 409L, 
418L, 420L, 438L, 442L, 443L, 457L, 460L, 462L, 463L), distance = c(34.2171939374429, 
142.21559151234, 108.90577635287, 22.4615378475751, 6.90121900053715, 
104.413362843728, 131.725971767812, 275.909152128676, 7.65097176333709, 
117.144187582512, 58.6988682397098, 35.8626535691508, 50.0912484562234, 
229.426967938503, 75.8863067742389, 76.078440573991, 68.5639754000265, 
216.9366070319, 203.968873908117, 72.5778258794592, 26.0559381272352, 
96.2054489727272, 27.3936260400358, 44.785619845546, 86.7856243416657, 
26.5753414474149, 326.001422521313, 207.410073959818, 35.4995224779234, 
151.072921898542, 123.068826586529, 14.1937617180519, 80.2174120788933, 
74.4167254607701, 8.76991391791461, 69.4141408362347, 49.0866534409497, 
12.1753060092707, 76.823272880231, 42.7773306829679, 5.66398666140667, 
71.4972841394311, 55.0884820038035, 19.9292121341159, 150.59806829316, 
43.4640281327381, 81.9234735320764, 165.338516820193, 119.206375829262, 
118.21002230117, 3.91037918881154, 28.5031097280298, 95.6949405401838, 
128.770948756638, 10.0671448675847, 153.663826395498, 97.3311444066342, 
60.5286154057222, 54.0386499583216, 208.554478969519, 79.9712163703753, 
285.216142918988, 75.9540367173213, 4.8461174564933, 12.0195963067999, 
142.837340063289, 72.5492740979156, 28.4036456497128, 22.5525208097417, 
46.6791310144805)), row.names = c(NA, -70L), class = "data.frame"), 
    obs_dsm = structure(list(object = c(2L, 3L, 9L, 12L, 22L, 
    23L, 26L, 29L, 32L, 49L, 69L, 72L, 79L, 86L, 103L, 108L, 
    121L, 126L, 127L, 140L, 150L, 162L, 165L, 169L, 190L, 194L, 
    200L, 202L, 215L, 217L, 222L, 226L, 229L, 238L, 243L, 259L, 
    262L, 274L, 275L, 277L, 304L, 308L, 310L, 311L, 317L, 318L, 
    329L, 332L, 334L, 344L, 361L, 366L, 371L, 375L, 380L, 381L, 
    387L, 393L, 395L, 408L, 409L, 418L, 420L, 438L, 442L, 443L, 
    457L, 460L, 462L, 463L), Sample.Label = c("14-10", "14-4", 
    "15-9", "15-10", "8-4", "17-8", "15-5", "16-7", "15-4", "17-6", 
    "13-12", "16-8", "15-4", "16-13", "9-4", "10-11", "12-10", 
    "8-8", "16-5", "15-10", "12-2", "16-11", "16-5", "9-10", 
    "13-5", "8-12", "17-3", "10-13", "11-6", "16-9", "5-4", "16-3", 
    "14-7", "14-8", "7-5", "13-8", "14-16", "14-9", "5-4", "3-3", 
    "13-13", "12-10", "15-15", "15-12", "16-4", "14-7", "9-5", 
    "8-12", "14-1", "16-8", "17-8", "12-12", "16-7", "13-3", 
    "16-11", "17-8", "16-1", "11-1", "16-6", "16-7", "12-1", 
    "16-4", "17-1", "11-4", "8-8", "13-13", "7-6", "15-15", "8-8", 
    "12-10"), size = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1), 
        distance = c(34.2171939374429, 142.21559151234, 108.90577635287, 
        22.4615378475751, 6.90121900053715, 104.413362843728, 
        131.725971767812, 275.909152128676, 7.65097176333709, 
        117.144187582512, 58.6988682397098, 35.8626535691508, 
        50.0912484562234, 229.426967938503, 75.8863067742389, 
        76.078440573991, 68.5639754000265, 216.9366070319, 203.968873908117, 
        72.5778258794592, 26.0559381272352, 96.2054489727272, 
        27.3936260400358, 44.785619845546, 86.7856243416657, 
        26.5753414474149, 326.001422521313, 207.410073959818, 
        35.4995224779234, 151.072921898542, 123.068826586529, 
        14.1937617180519, 80.2174120788933, 74.4167254607701, 
        8.76991391791461, 69.4141408362347, 49.0866534409497, 
        12.1753060092707, 76.823272880231, 42.7773306829679, 
        5.66398666140667, 71.4972841394311, 55.0884820038035, 
        19.9292121341159, 150.59806829316, 43.4640281327381, 
        81.9234735320764, 165.338516820193, 119.206375829262, 
        118.21002230117, 3.91037918881154, 28.5031097280298, 
        95.6949405401838, 128.770948756638, 10.0671448675847, 
        153.663826395498, 97.3311444066342, 60.5286154057222, 
        54.0386499583216, 208.554478969519, 79.9712163703753, 
        285.216142918988, 75.9540367173213, 4.8461174564933, 
        12.0195963067999, 142.837340063289, 72.5492740979156, 
        28.4036456497128, 22.5525208097417, 46.6791310144805), 
        detected = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
        1, 1)), row.names = c(NA, -70L), class = "data.frame"), 
    segs_dsm = structure(list(Effort = c(1509.75670789056, 1509.75670789005, 
    1841.64819444088, 1841.64819444127, 1841.64819444088, 1841.64819444127, 
    1841.64819444088, 1970.09552200119, 1970.09552200068, 1970.09552200119, 
    1970.09552200117, 1970.09552200119, 1970.09552200068, 1970.09552200119, 
    1955.30869574466, 1955.30869574425, 1955.30869574466, 1955.30869574466, 
    1955.30869574425, 1955.30869574466, 1955.30869574425, 1955.30869574466, 
    1865.60979199258, 1865.60979199258, 1865.60979199307, 1865.60979199258, 
    1865.60979199258, 1865.60979199258, 1865.60979199307, 1865.60979199258, 
    1865.60979199258, 1986.34534170867, 1986.34534170867, 1986.34534170825, 
    1986.34534170867, 1986.34534170864, 1986.34534170867, 1986.34534170825, 
    1986.34534170867, 1986.34534170867, 1894.70542809009, 1894.70542809063, 
    1894.70542809009, 1894.70542809009, 1894.70542809011, 1894.7054280906, 
    1894.70542809011, 1894.70542809009, 1894.70542809009, 1894.70542809063, 
    1894.70542809009, 1849.79178253383, 1849.79178253385, 1849.79178253383, 
    1849.79178253385, 1849.79178253383, 1849.79178253385, 1849.79178253341, 
    1849.79178253385, 1849.79178253383, 1849.79178253385, 1849.79178253383, 
    1849.79178253385, 1849.79178253383, 1884.64662660487, 1884.64662660484, 
    1884.64662660538, 1884.64662660487, 1884.64662660487, 1884.64662660484, 
    1884.64662660487, 1884.64662660538, 1884.64662660484, 1884.64662660487, 
    1884.64662660487, 1884.64662660538, 1884.64662660484, 1884.64662660487, 
    1998.64023619831, 1998.64023619789, 1998.64023619831, 1998.64023619789, 
    1998.64023619831, 1998.64023619831, 1998.64023619789, 1998.64023619831, 
    1998.64023619789, 1998.64023619831, 1998.64023619789, 1998.64023619831, 
    1998.86763427801, 1998.86763427804, 1998.8676342775, 1998.86763427801, 
    1998.86763427804, 1998.8676342775, 1998.86763427801, 1998.86763427804, 
    1998.86763427801, 1998.86763427801, 1998.86763427752, 1998.86763427801, 
    1914.41810599397, 1914.41810599358, 1914.41810599397, 1914.41810599399, 
    1914.41810599397, 1914.41810599358, 1914.41810599397, 1914.41810599399, 
    1914.41810599397, 1914.41810599358, 1914.41810599397, 1914.41810599399, 
    1914.41810599397, 1914.41810599355, 1914.41810599399, 1925.69913330851, 
    1925.69913330854, 1925.69913330851, 1925.69913330851, 1925.69913330812, 
    1925.69913330851, 1925.69913330851, 1925.69913330854, 1925.69913330851, 
    1925.69913330854, 1925.69913330851, 1925.69913330851, 1925.69913330812, 
    1925.69913330851, 1925.69913330851, 1925.69913330854, 1925.69913330851, 
    1936.24199164401, 1936.24199164455, 1936.24199164401, 1936.24199164455, 
    1936.24199164401, 1936.24199164453, 1936.24199164404, 1936.24199164453, 
    1936.24199164401, 1936.24199164455, 1936.24199164401, 1936.24199164455, 
    1936.24199164401, 1896.54485717815, 1896.54485717859, 1896.54485717815, 
    1896.54485717815, 1896.54485717859, 1896.54485717815, 2071.61129036641, 
    1716.73568683053, 1716.73568683056, 1716.73568683053, 1716.73568683053, 
    1132.93492591315), Sample.Label = c("2-1", "2-2", "3-1", 
    "3-2", "3-3", "3-4", "3-5", "4-1", "4-2", "4-3", "4-4", "4-5", 
    "4-6", "4-7", "5-1", "5-2", "5-3", "5-4", "5-5", "5-6", "5-7", 
    "5-8", "6-1", "6-2", "6-3", "6-4", "6-5", "6-6", "6-7", "6-8", 
    "6-9", "7-1", "7-2", "7-3", "7-4", "7-5", "7-6", "7-7", "7-8", 
    "7-9", "8-1", "8-2", "8-3", "8-4", "8-5", "8-6", "8-7", "8-8", 
    "8-9", "8-10", "8-11", "9-1", "9-2", "9-3", "9-4", "9-5", 
    "9-6", "9-7", "9-8", "9-9", "9-10", "9-11", "9-12", "9-13", 
    "10-1", "10-2", "10-3", "10-4", "10-5", "10-6", "10-7", "10-8", 
    "10-9", "10-10", "10-11", "10-12", "10-13", "10-14", "11-1", 
    "11-2", "11-3", "11-4", "11-5", "11-6", "11-7", "11-8", "11-9", 
    "11-10", "11-11", "11-12", "12-1", "12-2", "12-3", "12-4", 
    "12-5", "12-6", "12-7", "12-8", "12-9", "12-10", "12-11", 
    "12-12", "13-1", "13-2", "13-3", "13-4", "13-5", "13-6", 
    "13-7", "13-8", "13-9", "13-10", "13-11", "13-12", "13-13", 
    "13-14", "13-15", "15-1", "15-2", "15-3", "15-4", "15-5", 
    "15-6", "15-7", "15-8", "15-9", "15-10", "15-11", "15-12", 
    "15-13", "15-14", "15-15", "15-16", "15-17", "16-1", "16-2", 
    "16-3", "16-4", "16-5", "16-6", "16-7", "16-8", "16-9", "16-10", 
    "16-11", "16-12", "16-13", "17-1", "17-2", "17-3", "17-4", 
    "17-5", "17-6", "17-7", "17-8", "17-9", "17-10", "17-11", 
    "18-1"), X = c(`1` = -142278.674873642, `2` = -141019.831548218, 
    `3` = -141214.546848454, `4` = -142862.820774349, `5` = -144511.094700244, 
    `6` = -146159.36862614, `7` = -147807.642552035, `8` = -151067.805988352, 
    `9` = -149425.129664837, `10` = -147782.453341322, `11` = -146139.777017808, 
    `12` = -144497.100694293, `13` = -142854.424370778, `14` = -141211.748047263, 
    `15` = -141265.409885506, `16` = -143015.409885506, `17` = -144765.409885506, 
    `18` = -146515.409885506, `19` = -148265.409885506, `20` = -150015.409885506, 
    `21` = -151765.409885506, `22` = -153515.409885506, `23` = -153612.632107728, 
    `24` = -152057.076552173, `25` = -150501.520996617, `26` = -148945.965441062, 
    `27` = -147390.409885506, `28` = -145834.854329951, `29` = -144279.298774395, 
    `30` = -142723.743218839, `31` = -141168.187663284, `32` = -141279.298774395, 
    `33` = -143057.076552173, `34` = -144834.854329951, `35` = -146612.632107728, 
    `36` = -148390.409885506, `37` = -150168.187663284, `38` = -151945.965441062, 
    `39` = -153723.743218839, `40` = -155501.520996617, `41` = -156978.474259042, 
    `42` = -155398.65860442, `43` = -153818.842949797, `44` = -152239.027295175, 
    `45` = -150659.211640552, `46` = -149079.39598593, `47` = -147499.580331307, 
    `48` = -145919.764676685, `49` = -144339.949022062, `50` = -142760.13336744, 
    `51` = -141180.317712817, `52` = -141218.191101454, `53` = -142873.75353335, 
    `54` = -144529.315965246, `55` = -146184.878397142, `56` = -147840.440829039, 
    `57` = -149496.003260935, `58` = -151151.565692831, `59` = -152807.128124727, 
    `60` = -154462.690556623, `61` = -156118.252988519, `62` = -157773.815420415, 
    `63` = -159429.377852311, `64` = -161084.940284207, `65` = -161604.695599792, 
    `66` = -160033.267028363, `67` = -158461.838456935, `68` = -156890.409885506, 
    `69` = -155318.981314078, `70` = -153747.552742649, `71` = -152176.12417122, 
    `72` = -150604.695599792, `73` = -149033.267028363, `74` = -147461.838456935, 
    `75` = -145890.409885506, `76` = -144318.981314078, `77` = -142747.552742649, 
    `78` = -141176.12417122, `79` = -141819.420332282, `80` = -143608.202032562, 
    `81` = -145396.983732842, `82` = -147185.765433123, `83` = -148974.547133403, 
    `84` = -150763.328833684, `85` = -152552.110533964, `86` = -154340.892234244, 
    `87` = -156129.673934525, `88` = -157918.455634805, `89` = -159707.237335086, 
    `90` = -161496.019035366, `91` = -161557.076552173, `92` = -159890.409885506, 
    `93` = -158223.743218839, `94` = -156557.076552173, `95` = -154890.409885506, 
    `96` = -153223.743218839, `97` = -151557.076552173, `98` = -149890.409885506, 
    `99` = -148223.743218839, `100` = -146557.076552173, `101` = -144890.409885506, 
    `102` = -143223.743218839, `103` = -143247.111360005, `104` = -144960.514309003, 
    `105` = -146673.917258, `106` = -148387.320206998, `107` = -150100.723155996, 
    `108` = -151814.126104993, `109` = -153527.529053991, `110` = -155240.932002989, 
    `111` = -156954.334951986, `112` = -158667.737900984, `113` = -160381.140849982, 
    `114` = -162094.543798979, `115` = -163807.946747977, `116` = -165521.349696975, 
    `117` = -167234.752645972, `118` = -143952.668778282, `119` = -145676.168239326, 
    `120` = -147399.66770037, `121` = -149123.167161414, `122` = -150846.666622458, 
    `123` = -152570.166083502, `124` = -154293.665544545, `125` = -156017.165005589, 
    `126` = -157740.664466633, `127` = -159464.163927677, `128` = -161187.663388721, 
    `129` = -162911.162849765, `130` = -164634.662310809, `131` = -166358.161771853, 
    `132` = -168081.661232896, `133` = -169805.16069394, `134` = -171528.660154984, 
    `135` = -171583.185352292, `136` = -169968.736285864, `137` = -168354.287219435, 
    `138` = -166739.838153007, `139` = -165125.389086579, `140` = -163510.94002015, 
    `141` = -161896.490953722, `142` = -160282.041887294, `143` = -158667.592820865, 
    `144` = -157053.143754437, `145` = -155438.694688009, `146` = -153824.24562158, 
    `147` = -152209.796555152, `148` = -155054.674668826, `149` = -156752.081071859, 
    `150` = -158449.487474892, `151` = -160146.893877924, `152` = -161844.300280957, 
    `153` = -163541.70668399, `154` = -165317.455258452, `155` = -167012.739288161, 
    `156` = -168549.216601688, `157` = -170085.693915215, `158` = -171622.171228743, 
    `159` = -169918.086244825), Y = c(`1` = 6278626.41548628, 
    `2` = 6277792.94155205, `3` = 6275346.40550097, `4` = 6276167.90482373, 
    `5` = 6276989.40414649, `6` = 6277810.90346926, `7` = 6278632.40279202, 
    `8` = 6278499.34852229, `9` = 6277411.74066007, `10` = 6276324.13279784, 
    `11` = 6275236.52493562, `12` = 6274148.91707339, `13` = 6273061.30921117, 
    `14` = 6271973.70134894, `15` = 6269832.01621053, `16` = 6270704.21578383, 
    `17` = 6271576.41535712, `18` = 6272448.61493042, `19` = 6273320.81450371, 
    `20` = 6274193.014077, `21` = 6275065.2136503, `22` = 6275937.41322359, 
    `23` = 6274237.95813144, `24` = 6273208.03249842, `25` = 6272178.10686539, 
    `26` = 6271148.18123237, `27` = 6270118.25559935, `28` = 6269088.32996632, 
    `29` = 6268058.4043333, `30` = 6267028.47870027, `31` = 6265998.55306725, 
    `32` = 6264299.19901368, `33` = 6265185.24302464, `34` = 6266071.2870356, 
    `35` = 6266957.33104657, `36` = 6267843.37505753, `37` = 6268729.4190685, 
    `38` = 6269615.46307946, `39` = 6270501.50709043, `40` = 6271387.55110139, 
    `41` = 6270520.15839114, `42` = 6269474.17026662, `43` = 6268428.18214209, 
    `44` = 6267382.19401757, `45` = 6266336.20589305, `46` = 6265290.21776852, 
    `47` = 6264244.229644, `48` = 6263198.24151948, `49` = 6262152.25339495, 
    `50` = 6261106.26527043, `51` = 6260060.27714591, `52` = 6258729.00354868, 
    `53` = 6259554.13546106, `54` = 6260379.26737344, `55` = 6261204.39928582, 
    `56` = 6262029.53119819, `57` = 6262854.66311057, `58` = 6263679.79502295, 
    `59` = 6264504.92693533, `60` = 6265330.0588477, `61` = 6266155.19076008, 
    `62` = 6266980.32267246, `63` = 6267805.45458484, `64` = 6268630.58649722, 
    `65` = 6267636.84947304, `66` = 6266596.41439478, `67` = 6265555.97931653, 
    `68` = 6264515.54423827, `69` = 6263475.10916001, `70` = 6262434.67408175, 
    `71` = 6261394.23900349, `72` = 6260353.80392523, `73` = 6259313.36884697, 
    `74` = 6258272.93376871, `75` = 6257232.49869045, `76` = 6256192.0636122, 
    `77` = 6255151.62853394, `78` = 6254111.19345568, `79` = 6253488.91663503, 
    `80` = 6254380.44499829, `81` = 6255271.97336155, `82` = 6256163.5017248, 
    `83` = 6257055.03008806, `84` = 6257946.55845132, `85` = 6258838.08681458, 
    `86` = 6259729.61517783, `87` = 6260621.14354109, `88` = 6261512.67190435, 
    `89` = 6262404.20026761, `90` = 6263295.72863086, `91` = 6261659.01397024, 
    `92` = 6260555.52222057, `93` = 6259452.03047091, `94` = 6258348.53872124, 
    `95` = 6257245.04697157, `96` = 6256141.5552219, `97` = 6255038.06347223, 
    `98` = 6253934.57172256, `99` = 6252831.0799729, `100` = 6251727.58822323, 
    `101` = 6250624.09647356, `102` = 6249520.60472389, `103` = 6248660.73807944, 
    `104` = 6249514.69769143, `105` = 6250368.65730343, `106` = 6251222.61691543, 
    `107` = 6252076.57652743, `108` = 6252930.53613943, `109` = 6253784.49575142, 
    `110` = 6254638.45536342, `111` = 6255492.41497542, `112` = 6256346.37458742, 
    `113` = 6257200.33419941, `114` = 6258054.29381141, `115` = 6258908.25342341, 
    `116` = 6259762.21303541, `117` = 6260616.17264741, `118` = 6243472.64830897, 
    `119` = 6244331.64002011, `120` = 6245190.63173125, `121` = 6246049.62344239, 
    `122` = 6246908.61515353, `123` = 6247767.60686467, `124` = 6248626.59857581, 
    `125` = 6249485.59028695, `126` = 6250344.58199809, `127` = 6251203.57370923, 
    `128` = 6252062.56542037, `129` = 6252921.55713151, `130` = 6253780.54884265, 
    `131` = 6254639.54055379, `132` = 6255498.53226493, `133` = 6256357.52397607, 
    `134` = 6257216.51568721, `135` = 6256404.63664138, `136` = 6255335.71790634, 
    `137` = 6254266.7991713, `138` = 6253197.88043626, `139` = 6252128.96170123, 
    `140` = 6251060.04296619, `141` = 6249991.12423115, `142` = 6248922.20549611, 
    `143` = 6247853.28676108, `144` = 6246784.36802604, `145` = 6245715.449291, 
    `146` = 6244646.53055596, `147` = 6243577.61182092, `148` = 6243466.1459221, 
    `149` = 6244312.13285949, `150` = 6245158.11979688, `151` = 6246004.10673427, 
    `152` = 6246850.09367166, `153` = 6247696.08060904, `154` = 6248581.11326557, 
    `155` = 6249426.04241261, `156` = 6250191.82233103, `157` = 6250957.60224945, 
    `158` = 6251723.38216787, `159` = 6249355.8755978)), row.names = c(NA, 
    159L), class = "data.frame"), grid_dsm = structure(list(X = c(`1` = -159390.409885506, 
    `2` = -157390.409885506, `3` = -155390.409885506, `4` = -153390.409885506, 
    `5` = -151390.409885506, `6` = -149390.409885506, `7` = -147390.409885506, 
    `8` = -145390.409885506, `9` = -143390.409885506, `10` = -161390.409885506, 
    `11` = -159390.409885506, `12` = -157390.409885506, `13` = -155390.409885506, 
    `14` = -153390.409885506, `15` = -151390.409885506, `16` = -149390.409885506, 
    `17` = -147390.409885506, `18` = -145390.409885506, `19` = -143390.409885506, 
    `20` = -163390.409885506, `21` = -161390.409885506, `22` = -159390.409885506, 
    `23` = -157390.409885506, `24` = -155390.409885506, `25` = -153390.409885506, 
    `26` = -151390.409885506, `27` = -149390.409885506, `28` = -147390.409885506, 
    `29` = -145390.409885506, `30` = -143390.409885506, `31` = -169390.409885506, 
    `32` = -167390.409885506, `33` = -165390.409885506, `34` = -163390.409885506, 
    `35` = -161390.409885506, `36` = -159390.409885506, `37` = -157390.409885506, 
    `38` = -155390.409885506, `39` = -153390.409885506, `40` = -151390.409885506, 
    `41` = -149390.409885506, `42` = -147390.409885506, `43` = -145390.409885506, 
    `44` = -143390.409885506, `45` = -171390.409885506, `46` = -169390.409885506, 
    `47` = -167390.409885506, `48` = -165390.409885506, `49` = -163390.409885506, 
    `50` = -161390.409885506, `51` = -159390.409885506, `52` = -157390.409885506, 
    `53` = -155390.409885506, `54` = -153390.409885506, `55` = -151390.409885506, 
    `56` = -149390.409885506, `57` = -147390.409885506, `58` = -145390.409885506, 
    `59` = -143390.409885506, `60` = -171390.409885506, `61` = -169390.409885506, 
    `62` = -167390.409885506, `63` = -165390.409885506, `64` = -163390.409885506, 
    `65` = -161390.409885506, `66` = -159390.409885506, `67` = -157390.409885506, 
    `68` = -155390.409885506, `69` = -153390.409885506, `70` = -151390.409885506, 
    `71` = -149390.409885506, `72` = -147390.409885506, `73` = -145390.409885506, 
    `74` = -143390.409885506, `75` = -141390.409885506, `76` = -171390.409885506, 
    `77` = -169390.409885506, `78` = -167390.409885506, `79` = -165390.409885506, 
    `80` = -163390.409885506, `81` = -161390.409885506, `82` = -159390.409885506, 
    `83` = -157390.409885506, `84` = -155390.409885506, `85` = -153390.409885506, 
    `86` = -151390.409885506, `87` = -149390.409885506, `88` = -147390.409885506, 
    `89` = -145390.409885506, `90` = -143390.409885506, `91` = -141390.409885506, 
    `92` = -171390.409885506, `93` = -169390.409885506, `94` = -167390.409885506, 
    `95` = -165390.409885506, `96` = -163390.409885506, `97` = -161390.409885506, 
    `98` = -159390.409885506, `99` = -157390.409885506, `100` = -155390.409885506, 
    `101` = -153390.409885506, `102` = -151390.409885506, `103` = -149390.409885506, 
    `104` = -147390.409885506, `105` = -145390.409885506, `106` = -143390.409885506, 
    `107` = -141390.409885506, `108` = -171390.409885506, `109` = -169390.409885506, 
    `110` = -167390.409885506, `111` = -165390.409885506, `112` = -163390.409885506, 
    `113` = -161390.409885506, `114` = -159390.409885506, `115` = -157390.409885506, 
    `116` = -155390.409885506, `117` = -153390.409885506, `118` = -151390.409885506, 
    `119` = -149390.409885506, `120` = -147390.409885506, `121` = -145390.409885506, 
    `122` = -143390.409885506, `123` = -141390.409885506, `124` = -161390.409885506, 
    `125` = -159390.409885506, `126` = -157390.409885506, `127` = -155390.409885506, 
    `128` = -153390.409885506, `129` = -151390.409885506, `130` = -149390.409885506, 
    `131` = -147390.409885506, `132` = -145390.409885506, `133` = -143390.409885506, 
    `134` = -141390.409885506, `135` = -161390.409885506, `136` = -159390.409885506, 
    `137` = -157390.409885506, `138` = -155390.409885506, `139` = -153390.409885506, 
    `140` = -151390.409885506, `141` = -149390.409885506, `142` = -147390.409885506, 
    `143` = -145390.409885506, `144` = -143390.409885506, `145` = -141390.409885506, 
    `146` = -161390.409885506, `147` = -159390.409885506, `148` = -157390.409885506, 
    `149` = -155390.409885506, `150` = -153390.409885506, `151` = -151390.409885506, 
    `152` = -149390.409885506, `153` = -147390.409885506, `154` = -145390.409885506, 
    `155` = -143390.409885506, `156` = -141390.409885506, `157` = -161390.409885506, 
    `158` = -159390.409885506, `159` = -157390.409885506, `160` = -155390.409885506, 
    `161` = -153390.409885506, `162` = -151390.409885506, `163` = -149390.409885506, 
    `164` = -147390.409885506, `165` = -145390.409885506, `166` = -143390.409885506, 
    `167` = -141390.409885506, `168` = -159390.409885506, `169` = -157390.409885506, 
    `170` = -155390.409885506, `171` = -153390.409885506, `172` = -151390.409885506, 
    `173` = -149390.409885506, `174` = -147390.409885506, `175` = -145390.409885506, 
    `176` = -143390.409885506, `177` = -141390.409885506, `178` = -155390.409885506, 
    `179` = -153390.409885506, `180` = -151390.409885506, `181` = -149390.409885506, 
    `182` = -147390.409885506, `183` = -145390.409885506, `184` = -143390.409885506, 
    `185` = -141390.409885506, `186` = -153390.409885506, `187` = -151390.409885506, 
    `188` = -149390.409885506, `189` = -147390.409885506, `190` = -145390.409885506, 
    `191` = -143390.409885506, `192` = -141390.409885506, `193` = -153390.409885506, 
    `194` = -151390.409885506, `195` = -149390.409885506, `196` = -147390.409885506, 
    `197` = -145390.409885506, `198` = -143390.409885506, `199` = -141390.409885506, 
    `200` = -151390.409885506, `201` = -149390.409885506, `202` = -147390.409885506, 
    `203` = -145390.409885506, `204` = -143390.409885506, `205` = -141390.409885506
    ), Y = c(`1` = 6244043.1524534, `2` = 6244043.1524534, `3` = 6244043.1524534, 
    `4` = 6244043.1524534, `5` = 6244043.1524534, `6` = 6244043.1524534, 
    `7` = 6244043.1524534, `8` = 6244043.1524534, `9` = 6244043.1524534, 
    `10` = 6246043.1524534, `11` = 6246043.1524534, `12` = 6246043.1524534, 
    `13` = 6246043.1524534, `14` = 6246043.1524534, `15` = 6246043.1524534, 
    `16` = 6246043.1524534, `17` = 6246043.1524534, `18` = 6246043.1524534, 
    `19` = 6246043.1524534, `20` = 6248043.1524534, `21` = 6248043.1524534, 
    `22` = 6248043.1524534, `23` = 6248043.1524534, `24` = 6248043.1524534, 
    `25` = 6248043.1524534, `26` = 6248043.1524534, `27` = 6248043.1524534, 
    `28` = 6248043.1524534, `29` = 6248043.1524534, `30` = 6248043.1524534, 
    `31` = 6250043.1524534, `32` = 6250043.1524534, `33` = 6250043.1524534, 
    `34` = 6250043.1524534, `35` = 6250043.1524534, `36` = 6250043.1524534, 
    `37` = 6250043.1524534, `38` = 6250043.1524534, `39` = 6250043.1524534, 
    `40` = 6250043.1524534, `41` = 6250043.1524534, `42` = 6250043.1524534, 
    `43` = 6250043.1524534, `44` = 6250043.1524534, `45` = 6252043.1524534, 
    `46` = 6252043.1524534, `47` = 6252043.1524534, `48` = 6252043.1524534, 
    `49` = 6252043.1524534, `50` = 6252043.1524534, `51` = 6252043.1524534, 
    `52` = 6252043.1524534, `53` = 6252043.1524534, `54` = 6252043.1524534, 
    `55` = 6252043.1524534, `56` = 6252043.1524534, `57` = 6252043.1524534, 
    `58` = 6252043.1524534, `59` = 6252043.1524534, `60` = 6254043.1524534, 
    `61` = 6254043.1524534, `62` = 6254043.1524534, `63` = 6254043.1524534, 
    `64` = 6254043.1524534, `65` = 6254043.1524534, `66` = 6254043.1524534, 
    `67` = 6254043.1524534, `68` = 6254043.1524534, `69` = 6254043.1524534, 
    `70` = 6254043.1524534, `71` = 6254043.1524534, `72` = 6254043.1524534, 
    `73` = 6254043.1524534, `74` = 6254043.1524534, `75` = 6254043.1524534, 
    `76` = 6256043.1524534, `77` = 6256043.1524534, `78` = 6256043.1524534, 
    `79` = 6256043.1524534, `80` = 6256043.1524534, `81` = 6256043.1524534, 
    `82` = 6256043.1524534, `83` = 6256043.1524534, `84` = 6256043.1524534, 
    `85` = 6256043.1524534, `86` = 6256043.1524534, `87` = 6256043.1524534, 
    `88` = 6256043.1524534, `89` = 6256043.1524534, `90` = 6256043.1524534, 
    `91` = 6256043.1524534, `92` = 6258043.1524534, `93` = 6258043.1524534, 
    `94` = 6258043.1524534, `95` = 6258043.1524534, `96` = 6258043.1524534, 
    `97` = 6258043.1524534, `98` = 6258043.1524534, `99` = 6258043.1524534, 
    `100` = 6258043.1524534, `101` = 6258043.1524534, `102` = 6258043.1524534, 
    `103` = 6258043.1524534, `104` = 6258043.1524534, `105` = 6258043.1524534, 
    `106` = 6258043.1524534, `107` = 6258043.1524534, `108` = 6260043.1524534, 
    `109` = 6260043.1524534, `110` = 6260043.1524534, `111` = 6260043.1524534, 
    `112` = 6260043.1524534, `113` = 6260043.1524534, `114` = 6260043.1524534, 
    `115` = 6260043.1524534, `116` = 6260043.1524534, `117` = 6260043.1524534, 
    `118` = 6260043.1524534, `119` = 6260043.1524534, `120` = 6260043.1524534, 
    `121` = 6260043.1524534, `122` = 6260043.1524534, `123` = 6260043.1524534, 
    `124` = 6262043.1524534, `125` = 6262043.1524534, `126` = 6262043.1524534, 
    `127` = 6262043.1524534, `128` = 6262043.1524534, `129` = 6262043.1524534, 
    `130` = 6262043.1524534, `131` = 6262043.1524534, `132` = 6262043.1524534, 
    `133` = 6262043.1524534, `134` = 6262043.1524534, `135` = 6264043.1524534, 
    `136` = 6264043.1524534, `137` = 6264043.1524534, `138` = 6264043.1524534, 
    `139` = 6264043.1524534, `140` = 6264043.1524534, `141` = 6264043.1524534, 
    `142` = 6264043.1524534, `143` = 6264043.1524534, `144` = 6264043.1524534, 
    `145` = 6264043.1524534, `146` = 6266043.1524534, `147` = 6266043.1524534, 
    `148` = 6266043.1524534, `149` = 6266043.1524534, `150` = 6266043.1524534, 
    `151` = 6266043.1524534, `152` = 6266043.1524534, `153` = 6266043.1524534, 
    `154` = 6266043.1524534, `155` = 6266043.1524534, `156` = 6266043.1524534, 
    `157` = 6268043.1524534, `158` = 6268043.1524534, `159` = 6268043.1524534, 
    `160` = 6268043.1524534, `161` = 6268043.1524534, `162` = 6268043.1524534, 
    `163` = 6268043.1524534, `164` = 6268043.1524534, `165` = 6268043.1524534, 
    `166` = 6268043.1524534, `167` = 6268043.1524534, `168` = 6270043.1524534, 
    `169` = 6270043.1524534, `170` = 6270043.1524534, `171` = 6270043.1524534, 
    `172` = 6270043.1524534, `173` = 6270043.1524534, `174` = 6270043.1524534, 
    `175` = 6270043.1524534, `176` = 6270043.1524534, `177` = 6270043.1524534, 
    `178` = 6272043.1524534, `179` = 6272043.1524534, `180` = 6272043.1524534, 
    `181` = 6272043.1524534, `182` = 6272043.1524534, `183` = 6272043.1524534, 
    `184` = 6272043.1524534, `185` = 6272043.1524534, `186` = 6274043.1524534, 
    `187` = 6274043.1524534, `188` = 6274043.1524534, `189` = 6274043.1524534, 
    `190` = 6274043.1524534, `191` = 6274043.1524534, `192` = 6274043.1524534, 
    `193` = 6276043.1524534, `194` = 6276043.1524534, `195` = 6276043.1524534, 
    `196` = 6276043.1524534, `197` = 6276043.1524534, `198` = 6276043.1524534, 
    `199` = 6276043.1524534, `200` = 6278043.1524534, `201` = 6278043.1524534, 
    `202` = 6278043.1524534, `203` = 6278043.1524534, `204` = 6278043.1524534, 
    `205` = 6278043.1524534), area = c(4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 4e+06, 
    4e+06, 4e+06, 4e+06)), row.names = c(NA, 205L), class = "data.frame"))
  
    expect_equal(object = test,
               expected = exp)
  
})

test_that("prepare_dsm works", {
  expect_true(inherits(prepare_dsm, "function")) 
})



test_that("test erreur prepare_dsm", {
  
  data(iris)
  data(dataset_segs)
  data(dataset_map)
  data(dataset_detected)
  
  expect_error(object = prepare_dsm(map_obj = iris,
                                    dist_obj = dataset_detected, 
                                    segs_obj = dataset_segs))
  
  expect_error(object = prepare_dsm(map_obj = dataset_map,
                                    dist_obj = iris, 
                                    segs_obj = dataset_segs))
  
  expect_error(object = prepare_dsm(map_obj = dataset_map,
                                    dist_obj = dataset_detected, 
                                    segs_obj = iris))
  
})

